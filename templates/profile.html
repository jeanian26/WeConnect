{% extends "dash-block.html" %}
{% block content %}
<div id="app" class="personal-data-section data-container">
    <h1>PERSONAL INFORMATION</h1>
    <div class='profile-data-container'>
        <div class="profile-image-containr">
            <div class="image-upload">
                <label for="file-input">
                    <img :src=[[profileImgSrc1]] alt="">
                </label>

                <input id="file-input" @change="previewFiles" type="file" accept="image/jpeg, image/png" />
            </div>
            <h3>{{profile_details[0][4]}}</h3>
            <p>{{position}}</p>

        </div>
        <div class="profile-details">
            <div class="profile-settings ">
                <h3>Profile Settings</h3>
                <button v-on:click="editProfile"><i class="fas fa-user-edit"></i></button>
            </div>
            <div class="info-container">
                <form>
                    <label for="fname">Full Name</label>
                    <input type="text" id="fname" name="Fullname" placeholder="Full Name"
                        value="{{profile_details[0][4]}}" :disabled="disabled">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="Email" placeholder="Email" value="{{profile_details[0][2]}}"
                        :disabled="disabled">
                    <label for="phone">Phone Number</label>
                    <input type="text" id="phone" name="Phone" placeholder="Phone Number"
                        value="{{profile_details[0][5]}}" :disabled="disabled">
                    <label for="position">Position</label>
                    <div class="position">
                        <label for="">
                            <select name="" id="" placeholder="Position" disabled>
                                <option value="" disabled hidden>Position</option>
                                {% for position in positions %}
                                {% if position[0] == profile_details[0][6] %}
                                <option value={{position[0]}} selected>{{position[1]}}</option>
                                {% else %}
                                <option value={{position[0]}}>{{position[1]}}</option>
                                {% endif %}
                                {% endfor %}
                            </select>
                        </label>
                    </div>
                    <input type="submit" value="SUBMIT" :disabled="disabled">
                </form>
            </div>

        </div>
        <div class="details-container">
            <div class="profile-settings ">
                <h3>Previously Uploaded Files</h3>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue-resource/1.5.1/vue-resource.min.js"
    integrity="sha512-wGKmIfDWUJSUvxUfUayQPJj7ADCD60La3up0VCbq+MTFcOUQ2hlH2McnYFafHgLTsOrGwOdiHKX4p1v0BerCyQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.min.js"
    integrity="sha512-u9akINsQsAkG9xjc1cnGF4zw5TFDwkxuc9vUp5dltDWYCSmyd0meygbvgXrlc/z7/o4a19Fb5V0OUE58J7dcyw=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
    var app = new Vue({
        el: '#app',
        delimiters: ['[[', ']]'],
        data: {
            disabled: true,
            profileImgSrc: "https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500"
        },

        methods: {
            editProfile() {
                this.disabled = !this.disabled
            },
            async previewFiles(event) {
                console.log(event.target.files);
                file = event.target.files[0]
                await axios.post('/uploadProfileImg', file, {
                    headers: {
                        'Content-Type': file.type
                    }
                }).then(response => {
                    console.log(response)
                })


                this.profileImgSrc = window.URL.createObjectURL(file);

                // Blob
                let blob = await fetch(window.URL.createObjectURL(file)).then(r => r.blob());
                console.log(blob)
            },

            async EditImage(event) {
                this.axios
            },
            sendFiles() {
                console.log('test')
            }
        },
        mounted() {
        },
    }
    )



</script>

{% endblock %}